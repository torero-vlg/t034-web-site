@model T034.ViewModel.PageViewModel

@{
    ViewBag.Title = "Редактирование";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script src="@Url.Content("~/Scripts/ckeditor/ckeditor.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/ckeditor/adapters/jquery.js")" type="text/javascript"></script>

@using (Html.BeginForm("AddOrEdit", "Page"))
{
    <div class="control-group warning">
        <label class="control-label">@Html.LabelFor(m => m.Title)</label>
        <div>
            @Html.TextBoxFor(m => m.Title, new Dictionary<string, object> { { "class", "input-xxlarge" } })
            @Html.HiddenFor(m => m.Id)
        </div>
        
        <label class="control-label">@Html.LabelFor(m => m.Comment)</label>
        <div>
            @Html.TextBoxFor(m => m.Comment, new Dictionary<string, object> { { "class", "input-xxlarge" } })
        </div>

        <label class="control-label">@Html.LabelFor(m => m.Content)</label>
        <div>
            @Html.TextAreaFor(m => m.Content, new Dictionary<string, object> { { "class", "input-xxlarge" }, { "id", "content" } })
        </div>

    </div>
    <div class="form-actions">
        <button type="submit" class="btn btn-primary">Сохранить изменения</button>
    </div>
}

<script type="text/javascript">
    CKEDITOR.replace('content', {
        filebrowserImageBrowseUrl: '/Home/UploadPartial',
        filebrowserImageUploadUrl: '/home/Uploadnow',

        filebrowserBrowseUrl: '/Home/UploadPartial',
        filebrowserUploadUrl: '/home/Uploadnow'
    });

    function updateValue(id, value) {
        // this gets called from the popup window and updates the field with a new value
        var jqueryObjectByClass = $(".cke_dialog_ui_input_text")[1];
        jqueryObjectByClass.value = value;
    }
</script>